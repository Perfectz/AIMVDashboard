{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://aimusicvideo.local/schemas/visual_style.json",
  "title": "Visual Style Canon Schema",
  "description": "Defines the locked visual style identity that must be enforced across all prompts",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Version date in YYYY-MM-DD format"
    },
    "overallStyle": {
      "type": "string",
      "description": "High-level style identity (1-2 sentences)",
      "examples": ["Stylized cyberpunk with cinematic realism"]
    },
    "influences": {
      "type": "array",
      "description": "Artistic and cinematic influences that shape the visual language",
      "items": {
        "type": "object",
        "required": ["source", "aspect"],
        "properties": {
          "source": {
            "type": "string",
            "description": "Film, artist, or movement",
            "examples": ["Blade Runner", "Christopher Nolan", "1990s anime"]
          },
          "aspect": {
            "type": "string",
            "description": "What specific aspect to take from this influence",
            "examples": ["lighting + mood", "scale + seriousness", "expressive silhouettes"]
          }
        }
      }
    },
    "colorPalette": {
      "type": "object",
      "description": "Global color identity",
      "required": ["primary", "accent", "mood"],
      "properties": {
        "primary": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Primary colors used throughout",
          "examples": [["deep blues", "electric purple", "acid green"]]
        },
        "accent": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Accent colors for highlights and emphasis",
          "examples": [["hot pink", "amber orange"]]
        },
        "mood": {
          "type": "string",
          "description": "Overall color mood",
          "examples": ["high-contrast night with saturated neons"]
        }
      }
    },
    "lightingSignature": {
      "type": "object",
      "description": "Default lighting approach",
      "required": ["quality", "sources", "contrast"],
      "properties": {
        "quality": {
          "type": "string",
          "description": "Overall lighting quality",
          "examples": ["cinematic dramatic", "high-contrast moody"]
        },
        "sources": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Typical light sources",
          "examples": [["neon signs", "street lights", "holographic displays"]]
        },
        "contrast": {
          "type": "string",
          "enum": ["low", "medium", "high", "extreme"],
          "description": "Contrast level"
        },
        "signature": {
          "type": "string",
          "description": "Distinctive lighting treatment",
          "examples": ["neon reflections on wet surfaces", "rim lighting from city glow"]
        }
      }
    },
    "texture": {
      "type": "object",
      "description": "Surface and material quality",
      "properties": {
        "quality": {
          "type": "string",
          "examples": ["cinematic realism", "slight stylization", "hyper-real"]
        },
        "emphasis": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Textures to emphasize",
          "examples": [["rain on glass", "weathered concrete", "glowing holograms"]]
        }
      }
    },
    "atmosphere": {
      "type": "object",
      "description": "Environmental and depth rendering",
      "properties": {
        "depth": {
          "type": "string",
          "examples": ["atmospheric fog", "layered depth", "clear separation"]
        },
        "effects": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Common atmospheric effects",
          "examples": [["rain", "fog", "steam", "light rays"]]
        }
      }
    },
    "forbiddenElements": {
      "type": "array",
      "description": "Visual elements that MUST be excluded from all prompts",
      "items": {"type": "string"},
      "minItems": 1,
      "examples": [
        ["cartoon comedy style", "flat lighting", "plastic skin", "distorted anatomy", "visible text/logos", "watermarks", "camera shake"]
      ]
    },
    "negativePromptBase": {
      "type": "string",
      "description": "Base negative prompt to append to all AI tool prompts",
      "examples": ["no text, logos, watermarks, distorted anatomy, cartoon style, flat lighting, plastic skin"]
    },
    "notes": {
      "type": "string",
      "description": "Internal style notes and creative direction"
    }
  },
  "required": ["version", "overallStyle", "influences", "colorPalette", "lightingSignature", "forbiddenElements", "negativePromptBase"]
}
