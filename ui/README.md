# Prompt Compiler UI

**Version:** 2026-02-07

Web interface for browsing, comparing, and copying AI music video prompts.

---

## Features

- **Browse shots:** Navigate all shots in sidebar
- **Filter by tool:** Show/hide Kling, Nano Banana, and Suno prompts
- **Search:** Filter shots by ID
- **Variation comparison:** Toggle between A/B/C/D options for Kling prompts
- **Copy to clipboard:** One-click copy of complete prompt text
- **Lint status:** Visual indicators for pass/fail validation
- **Detailed errors:** View specific lint errors for failed prompts

---

## Quick Start

### 1. Generate Index
Before starting the UI, generate the prompts index:

```bash
npm run index
```

This scans the `prompts/` directory and creates `prompts_index.json`.

### 2. Start Server
Start the local web server:

```bash
npm run serve
```

### 3. Open Browser
Navigate to:

```
http://localhost:8000/
```

---

## Usage

### Browsing Prompts

1. **Sidebar:** Click any shot to view its prompts
2. **Tool Filter:** Check/uncheck Kling, Nano Banana, Suno to filter visible shots
3. **Search:** Type shot ID (e.g., "SHOT_01") to quickly find specific shots

### Viewing Variations

For **Kling prompts** (which have A/B/C/D variations):
- Click variation buttons (Option A, B, C, D) to switch between versions
- The variation strategy varies ONLY camera (lens, angle, movement, composition)
- Character, location, and action remain identical across all variations

### Copying Prompts

1. Select the desired shot and variation
2. Click **"Copy to Clipboard"** button
3. Paste directly into AI tool UI (Kling, Nano Banana, or Suno)

### Lint Status

**Green (PASS):** Prompt passes all validation rules
- Safe to use in AI tools

**Red (FAIL):** Prompt has critical errors
- View specific errors in the "Lint Errors" section below the prompt
- Fix errors before using

**Gray (UNKNOWN):** Lint report not available
- Run `npm run lint` to generate lint report

---

## File Structure

```
ui/
├── index.html          Main HTML page
├── styles.css          UI styling (cyberpunk theme)
├── app.js              Application logic
└── README.md           This file
```

---

## Data Sources

The UI reads from:

1. **`prompts_index.json`** (generated by `npm run index`)
   - Contains metadata for all prompts
   - Shot groupings and variations
   - File paths and sizes

2. **`lint/report.json`** (generated by `npm run lint`)
   - Validation results for each prompt
   - Error messages and rule violations

3. **`prompts/{tool}/{file}`** (actual prompt files)
   - Loaded dynamically when viewing a prompt

---

## Workflow Integration

### Phase 1 (Current)
- UI shows empty state (no prompts generated yet)
- Test by creating a sample prompt file in `prompts/kling/` and running `npm run index`

### Phase 2 (Production)
1. Generate prompts (via compilation or manually)
2. Run `npm run lint` to validate
3. Run `npm run index` to update index
4. Start UI with `npm run serve`
5. Browse and copy prompts to AI tools

---

## Customization

### Port
Default port is `8000`. To change:
1. Open `scripts/serve_ui.js`
2. Modify `const PORT = 8000;`
3. Restart server

### Theme
Colors defined in `styles.css` under `:root`:

```css
--bg-primary: #0f0f1e;      /* Dark background */
--accent-blue: #4a9eff;      /* Kling tool color */
--accent-purple: #a855f7;    /* Nano Banana tool color */
--accent-pink: #ec4899;      /* Suno tool color */
```

---

## Troubleshooting

### "No Prompts Found"
**Cause:** No prompt files exist or index not generated

**Fix:**
1. Check if `prompts/kling/`, `prompts/nanobanana/`, or `prompts/suno/` contain `.txt` or `.md` files
2. Run `npm run index`
3. Refresh browser

### "Index file not found"
**Cause:** `prompts_index.json` doesn't exist

**Fix:**
```bash
npm run index
```

### Port already in use
**Cause:** Another process using port 8000

**Fix:**
1. Stop other servers on port 8000
2. OR change PORT in `scripts/serve_ui.js`

### Lint errors not showing
**Cause:** `lint/report.json` doesn't exist

**Fix:**
```bash
npm run lint
```

---

## Browser Compatibility

Tested on:
- Chrome/Edge (recommended)
- Firefox
- Safari

**Note:** Requires modern browser with ES6+ support and Clipboard API.

---

## Development

### Adding New Features

**Example: Add "Download Prompt" button**

1. Add button to HTML (`index.html`):
```html
<button id="downloadBtn" class="btn">Download</button>
```

2. Add event listener in `app.js`:
```javascript
downloadBtn.addEventListener('click', () => {
  const blob = new Blob([promptText.textContent], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `${currentShot.shotId}_${currentVariation}.txt`;
  a.click();
});
```

3. Style in `styles.css` if needed

---

## Technical Stack

- **Zero dependencies** - vanilla HTML/CSS/JS
- **Client-side only** - no build process required
- **Simple HTTP server** - Node.js built-in modules only

---

## Support

For issues or feature requests:
1. Check lint/prompt_rules.md for validation rules
2. Check main README.md for workflow instructions
3. Verify all npm scripts run successfully
